{"is_source_file": true, "format": "Python", "description": "This file defines the core logic for a language graph-based API handling user requests related to event information in Surat. It includes intent classification, search strategy, and response synthesis, integrating with external modules for search, language model generation, and configuration.", "external_files": ["langgraph.graph", "./config", "./llm", "./schemas", "./search"], "external_methods": ["search_recent_surat_events", "get_settings", "generate_email_reply"], "published": ["build_reply_graph"], "classes": [{"name": "GraphState", "description": "TypedDict representing the state of the graph node containing user request info, search results, and response details."}], "methods": [{"name": "Dict[str,Any] node_classify_intent(state: GraphState)", "description": "Classifies user input intent, with a safety check for unsafe requests.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] node_search(state: GraphState)", "description": "Performs a search for recent events based on the classified intent and user request.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] node_synthesize(state: GraphState)", "description": "Generates a reply based on retrieved sources or returns a fallback message if sources are insufficient or request is unsafe.", "scope": "", "scopeKind": ""}, {"name": "str _basic_intent_classifier(text: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "bool _contains_unsafe_request(text: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _strip_excess_whitespace(s: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "build_reply_graph()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str route_after_classify(state: GraphState)", "scope": "build_reply_graph", "scopeKind": "function", "description": "unavailable"}], "calls": ["search_recent_surat_events", "get_settings", "generate_email_reply"], "search-terms": ["graph.py", "LangGraph", "intent classifier", "search_recent_surat_events", "build_reply_graph"], "state": 2, "file_id": 9, "knowledge_revision": 20, "git_revision": "e171680d744c6cd06031572c5ba306a55543342d", "ctags": [{"_type": "tag", "name": "GraphState", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^class GraphState(TypedDict, total=False):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_basic_intent_classifier", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def _basic_intent_classifier(text: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "_contains_unsafe_request", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def _contains_unsafe_request(text: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(text: str)"}, {"_type": "tag", "name": "_strip_excess_whitespace", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def _strip_excess_whitespace(s: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(s: str)"}, {"_type": "tag", "name": "build_reply_graph", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def build_reply_graph():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "node_classify_intent", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def node_classify_intent(state: GraphState) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(state: GraphState)"}, {"_type": "tag", "name": "node_search", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def node_search(state: GraphState) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(state: GraphState)"}, {"_type": "tag", "name": "node_synthesize", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^def node_synthesize(state: GraphState) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(state: GraphState)"}, {"_type": "tag", "name": "route_after_classify", "path": "/home/kavia/workspace/code-generation/surat-event-info-assistant-227308-227317/fastapi_langgraph_backend/src/api/graph.py", "pattern": "/^    def route_after_classify(state: GraphState) -> str:$/", "file": true, "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(state: GraphState)", "scope": "build_reply_graph", "scopeKind": "function"}], "hash": "e85ca785d8b683ea2b4a53276f858e93", "format-version": 4, "code-base-name": "fastapi_langgraph_backend", "filename": "fastapi_langgraph_backend/src/api/graph.py", "fields": [{"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"20": "e171680d744c6cd06031572c5ba306a55543342d"}]}